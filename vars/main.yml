---

local_tmp_directory: /tmp/ansible/icingaweb

_icingaweb_dependencies:
  default:
    - python-mysqldb
    - python3-mysqldb
    - mysql-client-core
  debian:
    - python-mysqldb
    - python3-mysqldb
    - mysql-client-core
  debian-9:
    - default-mysql-client-core
  debian-10:
    - default-mysql-client-core
  ubuntu:
    - python-mysqldb
    - python3-mysqldb
    - mysql-client-core
  centos-7:
    - php73-php-mysqlnd
    - mariadb
    - python36-PyMySQL
    - python2-PyMySQL
    - MySQL-python

icingaweb_modules_enabled_defaults:
  - monitoring

icingaweb_authentication_defaults:
  auth_db:
    backend: db
    resource: icingaweb

icingaweb_resources_defaults:
  db:
    icingaweb:
      type: db
      db: mysql
      host: 127.0.0.1
      port: 3306
      dbname: icingaweb_config
      username: icingaweb_config
      password: icingaweb_config
      prefix: icingaweb_
      charset: utf8

    icinga_ido:
      type: db
      db: mysql
      host: 127.0.0.1
      port: 3306
      dbname: icinga2_ido
      username: icinga2_ido
      password: icinga2_ido
      charset: utf8

_icingaweb_user:
  default: www-data
  redhat: nginx

_icingaweb_group:
  default: www-data
  redhat: nginx

icingaweb_python_packages: []

icingaweb_packages: "{{
          _icingaweb_dependencies[ansible_distribution | lower~ '-' ~ ansible_distribution_major_version] |
  default(_icingaweb_dependencies[ansible_distribution | lower] |
  default(_icingaweb_user[ansible_os_family | lower] |
  default(_icingaweb_dependencies['default']))) }}"

icingaweb_user: "{{
          _icingaweb_user[ansible_os_family | lower] |
  default(_icingaweb_user['default']) }}"

icingaweb_group: "{{
          _icingaweb_group[ansible_os_family | lower] |
  default(_icingaweb_group['default']) }}"
